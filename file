#Create SP

az ad sp create-for-rbac --name "apitest" --password "I4gotmypasw!"

{
  "appId": "a66119d2-4bc7-4ef9-a062-459c6bcb809d",
  "displayName": "apitest",
  "name": "http://apitest",
  "password": "I4gotmypasw!",
  "tenant": "a0c064bc-4064-40d7-8839-fe2404c7f1cd"
}

#Generate access token
curl -X POST \
       -d 'grant_type=client_credentials&client_id=a66119d2-4bc7-4ef9-a062-459c6bcb809d&client_secret=I4gotmypasw!&resource=https%3A%2F%2Fmanagement.azure.com%2F' \
     https://login.microsoftonline.com/a0c064bc-4064-40d7-8839-fe2404c7f1cd/oauth2/token



#Get VNET Rule


curl -X GET -H "Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6IlRpb0d5d3dsaHZkRmJYWjgxM1dwUGF5OUFsVSIsImtpZCI6IlRpb0d5d3dsaHZkRmJYWjgxM1dwUGF5OUFsVSJ9.eyJhdWQiOiJodHRwczovL21hbmFnZW1lbnQuYXp1cmUuY29tLyIsImlzcyI6Imh0dHBzOi8vc3RzLndpbmRvd3MubmV0L2EwYzA2NGJjLTQwNjQtNDBkNy04ODM5LWZlMjQwNGM3ZjFjZC8iLCJpYXQiOjE1MzA3NjkwMjcsIm5iZiI6MTUzMDc2OTAyNywiZXhwIjoxNTMwNzcyOTI3LCJhaW8iOiJZMmRnWUxBMGJXMUtUdjlmOTBERjdjR2lzS3NOQUE9PSIsImFwcGlkIjoiYTY2MTE5ZDItNGJjNy00ZWY5LWEwNjItNDU5YzZiY2I4MDlkIiwiYXBwaWRhY3IiOiIxIiwiaWRwIjoiaHR0cHM6Ly9zdHMud2luZG93cy5uZXQvYTBjMDY0YmMtNDA2NC00MGQ3LTg4MzktZmUyNDA0YzdmMWNkLyIsIm9pZCI6ImMxZDkzMzY4LTY0NTAtNGI4Mi04ZjJhLWEzMmQxMTM0NzhmMiIsInN1YiI6ImMxZDkzMzY4LTY0NTAtNGI4Mi04ZjJhLWEzMmQxMTM0NzhmMiIsInRpZCI6ImEwYzA2NGJjLTQwNjQtNDBkNy04ODM5LWZlMjQwNGM3ZjFjZCIsInV0aSI6IkljUzlSUWwxaWthd2I1NGNMd29UQUEiLCJ2ZXIiOiIxLjAifQ.IOGOeXI-lRJyxTGdmwd5AEhV7xqfbUAdRJCY2PXitE2dvLpXDoR2R_yVhEhvzOi93r3K9OxYg5rQjNylgyulo1_IBhHjAUAUaYbNgXhALanrQZZPhOoYfKYsAqgeT71c2kxuAVEu0fQEHJ4KD1jsFOqRyTZh2mMuEz8vlZRHeN4-u1BMdZ39gKLCPBhxkTisvl-si8UWis6WtIP-ahdt0e2djMLm1viEvCb2FRKuCgfFx8ETISNTAMrdIkIPLslJ5GvY0nt8-hMSdGf7nmeFjESgLwM5bA4GI66diDJfrl56l9rlJ5CmvpP7kg2xb8uvVw1T4Gg5Fff8oPlcTv7n2g" -H "Content-Type: application/json" https://management.azure.com/subscriptions/01494bc7-51c0-4aa5-8fd0-15562ca0ffec/resourceGroups/geeks_rg/providers/Microsoft.Sql/servers/tdegenpacttest/virtualNetworkRules/newVnetRule1?api-version=2015-05-01-preview

#Create VNET Rule

curl -X PUT -H "Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6IlRpb0d5d3dsaHZkRmJYWjgxM1dwUGF5OUFsVSIsImtpZCI6IlRpb0d5d3dsaHZkRmJYWjgxM1dwUGF5OUFsVSJ9.eyJhdWQiOiJodHRwczovL21hbmFnZW1lbnQuYXp1cmUuY29tLyIsImlzcyI6Imh0dHBzOi8vc3RzLndpbmRvd3MubmV0L2EwYzA2NGJjLTQwNjQtNDBkNy04ODM5LWZlMjQwNGM3ZjFjZC8iLCJpYXQiOjE1MzA3NjkwMjcsIm5iZiI6MTUzMDc2OTAyNywiZXhwIjoxNTMwNzcyOTI3LCJhaW8iOiJZMmRnWUxBMGJXMUtUdjlmOTBERjdjR2lzS3NOQUE9PSIsImFwcGlkIjoiYTY2MTE5ZDItNGJjNy00ZWY5LWEwNjItNDU5YzZiY2I4MDlkIiwiYXBwaWRhY3IiOiIxIiwiaWRwIjoiaHR0cHM6Ly9zdHMud2luZG93cy5uZXQvYTBjMDY0YmMtNDA2NC00MGQ3LTg4MzktZmUyNDA0YzdmMWNkLyIsIm9pZCI6ImMxZDkzMzY4LTY0NTAtNGI4Mi04ZjJhLWEzMmQxMTM0NzhmMiIsInN1YiI6ImMxZDkzMzY4LTY0NTAtNGI4Mi04ZjJhLWEzMmQxMTM0NzhmMiIsInRpZCI6ImEwYzA2NGJjLTQwNjQtNDBkNy04ODM5LWZlMjQwNGM3ZjFjZCIsInV0aSI6IkljUzlSUWwxaWthd2I1NGNMd29UQUEiLCJ2ZXIiOiIxLjAifQ.IOGOeXI-lRJyxTGdmwd5AEhV7xqfbUAdRJCY2PXitE2dvLpXDoR2R_yVhEhvzOi93r3K9OxYg5rQjNylgyulo1_IBhHjAUAUaYbNgXhALanrQZZPhOoYfKYsAqgeT71c2kxuAVEu0fQEHJ4KD1jsFOqRyTZh2mMuEz8vlZRHeN4-u1BMdZ39gKLCPBhxkTisvl-si8UWis6WtIP-ahdt0e2djMLm1viEvCb2FRKuCgfFx8ETISNTAMrdIkIPLslJ5GvY0nt8-hMSdGf7nmeFjESgLwM5bA4GI66diDJfrl56l9rlJ5CmvpP7kg2xb8uvVw1T4Gg5Fff8oPlcTv7n2g" -H "Content-Type: application/json" --data '{ "properties": { "ignoreMissingVnetServiceEndpoint": "false", "virtualNetworkSubnetId": "/subscriptions/01494bc7-51c0-4aa5-8fd0-15562ca0ffec/resourceGroups/geeks_rg/providers/Microsoft.Network/virtualNetworks/Dtlminjar/subnets/DtlminjarSubnet" }}' https://management.azure.com/subscriptions/01494bc7-51c0-4aa5-8fd0-15562ca0ffec/resourceGroups/geeks_rg/providers/Microsoft.Sql/servers/tdegenpacttest/virtualNetworkRules/sureshrule?api-version=2015-05-01-preview


